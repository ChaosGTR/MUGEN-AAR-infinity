;---------------------------------------------------------------------------
;Frozen
[Statedef 6805]
type    = S                      
movetype= I                     
physics = N                                          
ctrl = 0                         
anim = 6805                
poweradd = 0       
sprpriority = 5     

[State 1001]
Type = Playsnd
Trigger1 = !time
value = 600, 0   
persistent = 0

[State 0, PosAdd]
type = sprpriority
trigger1 = enemynear,stateno = 5149
value = -2
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = (p2dist x) - 10
y = (p2dist y)
ignorehitpause = 1

[State 1200, 6]
type = explod
trigger1 = time%11 = 0
anim = 6810
id = 6140
pos = -10+random%20,-70-random%70
facing = 1
sprpriority = 3
bindtime = 1
ownpal = 1
scale = 1,1

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 600]
Type = Helper
trigger1 = time > 10
trigger1 = enemynear,stateno != [5144,5150]
trigger2 = root,anim = 3902
trigger2 = root,animelem = 9
StateNo = 6806
ID = 6806
Name = "Frozen Ice Break"
pos = -10,0
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 1001]
Type=Destroyself
trigger1 = numhelper(6805) > 1
trigger2 = time > 10
trigger2 = enemynear,stateno != [5144,5150]
trigger3 = root,anim = 3902
trigger3 = root,animelem = 9

;---------------------------------------------------------------------------
;Frozen
[Statedef 6807]
type    = S                      
movetype= I                     
physics = N                                          
ctrl = 0                         
anim = 9032               
poweradd = 0       
sprpriority = 5     

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = (p2dist x)
y = (p2dist y) - 50
ignorehitpause = 1

[State 1001,]
type = Trans
trigger1 = 1
trans = Add
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 540
scale = 0+time*.005,0+time*.004

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time >= 540
scale = 2.7,2.16

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1001]
Type=Destroyself
trigger1 = time > 10
trigger1 = enemynear,stateno != [5390,5394]

;---------------------------------------------------------------------------
;Ice Break
[Statedef 6806]
type    = S                      
movetype= I                     
physics = N                                          
ctrl = 0                         
anim = 6806                
poweradd = 0       
sprpriority = 5     

[State 1001]
Type = Playsnd
Trigger1 = !time
value = 600, 1  

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1001]
Type=Destroyself
trigger1 = animtime = 0
trigger2 = numhelper(6805) > 1
;---------------------------------------------------------------------------
;Izanagi Astral Heat Win
[Statedef 2183]
type    = S
movetype= I
physics = S
poweradd = 0
ctrl = 0
anim = 2183
sprpriority = -2
velset = 0,3

[State 1]
type = velmul
trigger1 = pos Y >= -50
y = .95

[State 1]
type = changeanim
trigger1 = pos Y >= -10
value = 2184
persistent = 0

[State 195, 1]
type = playsnd
trigger1 = anim = 2184
trigger1 = animelem = 3
value = 0,7

[State 195, 1]
type = playsnd
trigger1 = anim = 2184
trigger1 = animelem = 10
value = 0,6

[State 1]
type = velset
trigger1 = pos Y >= 0
y = 0

[State 210, 5]
type = null;Changestate
trigger1 = root,stateno != [191,193]
value = 2500
ctrl = 0
;---------------------------------------------------------------------------
;Artemesia Intro
[Statedef 2190]
type    = S
movetype= I
physics = S
poweradd = 0
ctrl = 0
anim = 192
sprpriority = -2

[State 210, 5]
type = Changestate
trigger1 = root,stateno != [191,193]
value = 2500
ctrl = 0

;---------------------------------------------------------------------------
;Artemesia 5AAAAA
[Statedef 2205]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2205
sprpriority = -2
velset = 6,0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = playerpush
trigger1 = 1
value = 1

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = screenbound
trigger1 = 1
value = 1
ignorehitpause = 1

[State 1200, 6]
type = explod
trigger1 = animelem = 7
anim = 6211
id = 6211
pos = 0,0
facing = 1
sprpriority = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1
scale = 0.33,0.33

[State 0]
type = velset
trigger1= !time
X = 12

[State 0]
type = width
trigger1= 1
edge = 40,10

[State 810]
type = PlaySnd
trigger1 = AnimElem = 2
value = 400, 8

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = animelem = 4
trigger2 = animelem = 7
trigger3 = animelem = 10
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(25*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 10                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10, -64+ceil(p2dist Y*.75)               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 18             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5 
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 28
guard.ctrltime = 12
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = animelem = 4
trigger2 = animelem = 7
trigger3 = animelem = 10
trigger1 = enemynear,movetype = A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(45*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 10                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10, -64+ceil(p2dist Y*.75)               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 40              ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 40
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7776
ID = 7775
name = "You May Auto Combo"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1

[State 200,]
type = targetstate
triggerall = p2statetype = A
trigger1 = movehit = 1
trigger1 = !moveguarded
value = 5812
ignorehitpause = 0
persistent = 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State -2, Dampener]
type = attackmulset
trigger1 = 1
value = root,fvar(5)
ignorehitpause = 1

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = (root,fvar(5))*1.2
ignorehitpause = 1

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = Changestate
trigger1 = var(5) >= 60
trigger2 = root,stateno != 205
trigger3 = time >= 60
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;---------------------------------------------------------------------------
;Artemesia 2BB
[Statedef 2411]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2411
sprpriority = -2
velset = 6,0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = playerpush
trigger1 = 1
value = 1

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = screenbound
trigger1 = 1
value = 1
ignorehitpause = 1

[State 1200, 6]
type = explod
trigger1 = animelem = 4
anim = 6620
id = 6411
pos = 238,-246
facing = 1
sprpriority = 4
bindtime = -1
ownpal = 1
vfacing = -1
ignorehitpause = 0
scale = 0.6,0.39

[State 0]
type = width
trigger1= 1
edge = 40,10

[State 200, 1]
type = HitDef
nochainID = 8000
triggerall = root,var(43) < 3
trigger1 = animelem = 4
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(20*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 45                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 6                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 24             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5 
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 28
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 45
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0

[State 200, 1]
type = HitDef
nochainID = 8000
triggerall = root,var(43) >= 3
trigger1 = animelem = 4
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(8*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 45                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 6                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 24             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5 
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 28
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 45
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = animelem = 4
trigger1 = enemynear,movetype = A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(45*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 45                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 6                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 40              ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 40
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 45
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0

[State 200, 1]
type = HitDef
nochainID = 8000
triggerall = root,var(41) < 5
triggerall = root,var(43) < 3
trigger1 = animelem = 9
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(35*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 10                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 24             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5 
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recover = 0
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 5812

[State 200, 1]
type = HitDef
nochainID = 8000
triggerall = root,var(41) >= 5 || root,var(43) >= 3
trigger1 = animelem = 9
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(9*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 10                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 24             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5 
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 28
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 852

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = animelem = 9
trigger1 = enemynear,movetype = A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(55*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 10                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 40              ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5
air.velocity = -6,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 40
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 5812

[State -2, Dampener]
type = parentvaradd
trigger1 = movehit
var(41) = 1
ignorehitpause = 1
persistent = 0

[State -2, Dampener]
type = parentvaradd
trigger1 = movehit
var(43) = 1
ignorehitpause = 1
persistent = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 1300]
type = helper
trigger1 = movecontact = 1
trigger1 = animelemtime(9) >= 0
helpertype = normal
stateno = 7776
ID = 7772
name = "You May Auto Combo"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0, 5

[State -2, Dampener]
type = attackmulset
trigger1 = 1
value = root,fvar(5)
ignorehitpause = 1

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = (root,fvar(5))*1.2
ignorehitpause = 1

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = Changestate
trigger1 = root,stateno != 411
trigger2 = time >= 42
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;---------------------------------------------------------------------------
;Artemesia jAA
[Statedef 2601]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2601
sprpriority = -2
velset = 0,0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = explod
trigger1 = animelemtime(2) = 2
anim = 6601
id = 6601
pos = 45,43
facing = 1
sprpriority = 3
bindtime = -1
ownpal = 1
ignorehitpause = 1
scale = 0.6,0.77

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = !movecontact && !movereversed
trigger1 = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(40*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = Medium                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = HA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 6                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10, -74               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 6                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = ceil(35*(root,fvar(11)))             ;Time opponent is in hit state
guard.ctrltime = 25
ground.velocity = -5             ;Velocity at which opponent is pushed
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3.4,-4.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
air.fall = 1
fall.recovertime = 35
guard.ctrltime = 35
p1sprpriority = -2

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = !movecontact && !movereversed
trigger1 = enemynear,movetype = A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(65*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = Medium                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = HA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 6                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10, -74               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 6                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 65              ;Time opponent is in hit state
ground.velocity = -5             ;Velocity at which opponent is pushed
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3.4,-4.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
air.fall = 1
fall.recover = 0
guard.ctrltime = 35
p1sprpriority = -2

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 8000, ]
type = bgpalfx
trigger1 = movecontact = 1
trigger1 = root,fvar(19) > 0
time = 9
add = -55,-55,-55
ignorehitpause = 1

[State 1, ]
type = pause
trigger1 = movecontact = 1
time = 4
movetime = 0
ignorehitpause = 1
persistent = 0
pausebg = 0
endcmdbuftime = 4

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7776
ID = 7774
name = "You May Auto Combo"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State -2, Dampener]
type = attackmulset
trigger1 = 1
value = root,fvar(5)
ignorehitpause = 1

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = (root,fvar(5))*1.2
ignorehitpause = 1

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 5

[State 210, 5]
type = bindtoroot
trigger1 = root,stateno = 601
trigger1 = animelemtime(5) < 0
pos = -28,-39
ignorehitpause = 1

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = Changestate
trigger1 = root,stateno = [1000,1001]
value = 2100
ctrl = 0
ignorehitpause = 1

[State 210, 5]
type = Changestate
trigger1 = root,stateno = [1002,1003]
value = 2102
ctrl = 0
ignorehitpause = 1

[State 210, 5]
type = Changestate
trigger1 = root,stateno = [1004,1005]
value = 2104
ctrl = 0
ignorehitpause = 1

[State 210, 5]
type = Changestate
trigger1 = var(5) >= 50
trigger2 = root,stateno != 601
trigger3 = root,stateno = [1100,1105]
trigger3 = root,stateno = 830
trigger4 = root,stateno = [8000,8050]
trigger5 = root,stateno = [3005,3060]
trigger6 = root,statetype != A
value = 2500
ctrl = 0
ignorehitpause = 1

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

;---------------------------------------------------------------------------
;Artemesia jC
[Statedef 2620]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2620
sprpriority = -2
velset = 6,0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = playerpush
trigger1 = 1
value = 1

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = screenbound
trigger1 = 1
value = 1
ignorehitpause = 1

[State 1200, 6]
type = explod
trigger1 = animelem = 7
anim = 6211
id = 6211
pos = 0,0
facing = 1
sprpriority = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1
scale = 0.33,0.33

[State 0]
type = playerpush
trigger1= 1
value = 0

[State 210, 5]
type = bindtoroot
trigger1 = root,stateno = 620
trigger1 = animelemtime(11) < 0
pos = -20,-28
ignorehitpause = 1

[State 1200, 6]
type = explod
trigger1 = animelem = 4
anim = 6620
id = 6620
pos = 235,27
facing = 1
sprpriority = 4
bindtime = -1
ownpal = 1
ignorehitpause = 0
scale = 0.4,0.39

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = !movecontact && !movereversed
trigger1 = animelemtime(8) < 0
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(25*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 45                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 6                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 24             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6.5,-6.5 
air.velocity = -6.4,-6.5           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 28
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 45
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = !movecontact && !movereversed
trigger1 = animelemtime(8) < 0
trigger1 = enemynear,movetype = A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(45*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 45                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 6                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 6             ;Time that the opponent slides back
ground.hittime  = 40              ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = -6,-6.5
air.velocity = -6,-6.5          ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 40
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
Palfx.time       = 45
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0

[State 200, 1]
type = HitDef
nochainID = 8000
triggerall = root,var(42) < 5
trigger1 = animelem = 9
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(35*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 8                ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 40             ;Time that the opponent slides back
ground.hittime  = 24             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = 4,-7
guard.velocity = 20
air.velocity = 4,-7          ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 65
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 200, 1]
type = HitDef
nochainID = 8000
triggerall = root,var(42) >= 5
trigger1 = animelem = 9
triggerall = enemynear,movetype != A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(35*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 8                ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 40             ;Time that the opponent slides back
ground.hittime  = 24             ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = 4,-7
guard.velocity = 20
air.velocity = 4,-7          ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recovertime = 5
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 200, 1]
type = HitDef
nochainID = 8000
trigger1 = animelem = 9
trigger1 = enemynear,movetype = A
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = ceil(55*root,fvar(4)), 0                   ;Damage that move inflicts, guard damage
animtype = hard                ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAFD                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 8                 ;Time attacker pauses, time opponent shakes
sparkno = 3                      ;Spark anim no (Def: set above)
sparkxy = -10,-65+ceil(p2dist Y)              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5, 7                  ;Sound to play on hit
guardsound = S6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 40             ;Time that the opponent slides back
ground.hittime  = 40              ;Time opponent is in hit state
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
ground.velocity = 4,-7
guard.velocity = 20
air.velocity = 4,-7         ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 16                 ;Time before opponent regains control in air
fall = 1
fall.recover = 0
guard.ctrltime = 17
p1sprpriority = -2
p2facing = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State -2, Dampener]
type = parentvaradd
trigger1 = movehit
var(42) = 1
ignorehitpause = 1
persistent = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 1300]
type = helper
trigger1 = movecontact = 1
trigger1 = animelemtime(9) >= 0
helpertype = normal
stateno = 7776
ID = 7772
name = "You May Auto Combo"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0, 5

[State -2, Dampener]
type = attackmulset
trigger1 = 1
value = root,fvar(5)
ignorehitpause = 1

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = (root,fvar(5))*1.2
ignorehitpause = 1

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = Changestate
trigger1 = root,stateno != 620
trigger2 = time >= 44
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;---------------------------------------------------------------------------
;Artemesia Marin Karen
[Statedef 2110]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2110
sprpriority = -2

[State 1102]
type = parentvarset
trigger1 = animelemtime(6) >= 0
var(36) = 1

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = screenbound
trigger1 = 1
value = 0
ignorehitpause = 1

[State -2]
type = Helper
Trigger1 = animelem = 6
helpertype = normal
name = "Marin Karin"
ID = 6110
Stateno = 6110
pos = 72,-133
PosType = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.33
size.yscale = 0.33
persistent = 0

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 210, 5]
type = Changestate
trigger1 = var(5) >= 80
trigger2 = root,stateno = 411
trigger3 = root,stateno = 601
trigger4 = root,stateno = 620
trigger5 = root,stateno = [3000,3900]
trigger6 = time >= 80
trigger6 = roundstate > 2
trigger7 = root,stateno = 1300 || root,stateno = 1400
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;---------------------------------------------------------------------------
;Marin Karin
[Statedef 6110]
type = A
movetype = A
physics = N
Anim = 6110
ctrl = 0
sprpriority = 5
velset = 0,0

[State 0, PalFX]
type = PalFX
trigger1 = enemynear,name = "Mitsuru Kirijo"
trigger1 = teamside = 2
time = 1
add = 00,170,190
mul = 00,150,150
color = 0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = vel x < 2
trigger1 = p2dist x >= 0
x = .05

[State 0, VelAdd]
type = VelAdd
trigger1 = vel x > -2
trigger1 = p2dist x < 0
x = -.05

[State 0, VelAdd]
type = VelAdd
trigger1 = vel y < .5
trigger1 = p2dist y + (enemynear,const(size.mid.pos.y)) >= 0
y = .02

[State 0, VelAdd]
type = VelAdd
trigger1 = vel y > -.5
trigger1 = p2dist y + (enemynear,const(size.mid.pos.y)) < 0
y = -.02

[State 1102]
type = AngleDraw
trigger1 = time < 10
scale = .1*(time),.1*(time)

[State 1102]
type = AngleDraw
trigger1 = time >= 10
scale = 1,1

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,1

[State 195, 1]
type = playsnd
trigger1 = movehit
value = 400,2
persistent = 0
ignorehitpause = 1

[State 195, 1]
type = playsnd
trigger1 = movehit
value = 400,0
persistent = 0
ignorehitpause = 1

[State 1001,]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 1001,]
type = NotHitBy
trigger1 = 1
value = ,AA,AT
time = 1
ignorehitpause = 1

[State 1001,]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 6113
time = -1
ignorehitpause = 1

[State 1001,]
type = null;Trans
trigger1 = 1
trans = Add

[State 1001,]
type = null;AfterImage
trigger1 = Time = 0
time = -1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 6800, ]
type = explod
trigger1 = time%30 = 0
anim = 6970
ID = 6970
sprpriority = -3
vel = 0,0
scale=.075,.075
pos = 0,-5
bindtime = 3
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype != A
trigger1 = !movecontact && !movereversed
attr = A, SP
damage    = ceil(10*root,fvar(4)),2
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,30
guard.pausetime = 0,10
sparkno = 1
sparkxy = -10,-3
hitsound   = S5,1
guardsound = S6,0
animtype = Med
ground.type = high
ground.slidetime = 6
ground.hittime  = 30
guard.ctrltime = 7
ground.velocity = 0
air.velocity = 0,-5
airguard.velocity = 0,-1
air.hittime = 16
air.fall = 1
fall.recovertime = 30
Palfx.time       = 30
Palfx.time       = 30
Palfx.add       = 252,100,100
Palfx.sinadd   = 40,10,10,10
Palfx.color     = 64
Palfx.invertall = 0
givepower = -25,0
getpower = 60,5

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype = A
trigger1 = !movecontact && !movereversed
attr = A, SP
damage    = ceil(10*root,fvar(4)),3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,45
guard.pausetime = 0,10
sparkno = 3
sparkxy = -10,-3
hitsound   = S5,1
guardsound = S6,0
animtype = Med
ground.type = high
ground.slidetime = 6
ground.hittime  = 45
guard.ctrltime = 22
ground.velocity = 0
air.velocity = 0,-5
airguard.velocity = 0,-1
air.hittime = 16
air.fall = 1
fall.recover = 0
Palfx.time       = 45
Palfx.time       = 30
Palfx.add       = 252,100,100
Palfx.sinadd   = 40,10,10,10
Palfx.color     = 64
Palfx.invertall = 0
givepower = -25,0
getpower = 60,5

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = 1.2
ignorehitpause = 1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State 1001,]
type = ChangeState
trigger1 = movecontact
trigger2 = root,movetype = H
trigger2 = root,stateno != [0,159]
value = 6113

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

;======================================================================================================================================================
;Projectile End
[Statedef 6113]
type = S
physics = N
movetype = I
ctrl = 0
sprpriority = 5

[State 0, PalFX]
type = PalFX
trigger1 = enemynear,name = "Mitsuru Kirijo"
trigger1 = teamside = 2
time = 1
add = 00,170,190
mul = 00,150,150
color = 0
ignorehitpause = 1

[State 0,]
type = angledraw
trigger1 = 1
scale = 1+(time*.05),1+(time*.05)

[State 0,]
type = velmul
trigger1 = 1
x = .2
y = .2

[State 1]
type = AfterImage
trigger1 = Time = 0
time = 1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, HB]
type = nothitby
trigger1 = 1
time = -1
value = SCA, AA
ignorehitpause = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256-ceil(time*20), 256
ignorehitpause = 1
persistent = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = time >= 30
trigger1 = !numtarget

;---------------------------------------------------------------------------
;Artemesia Tentarafoo
[Statedef 2130]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2130
sprpriority = -2

[State 1102]
type = parentvarset
trigger1 = animelemtime(6) >= 0
var(36) = 1

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = screenbound
trigger1 = 1
value = 0
ignorehitpause = 1

[State -2]
type = Helper
Trigger1 = animelem = 6
helpertype = normal
name = "Tentarafoo"
ID = 6130
Stateno = 6130
pos = 72,0
PosType = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.33
size.yscale = 0.33
persistent = 0

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 210, 5]
type = Changestate
trigger1 = var(5) >= 80
trigger2 = root,stateno = 411
trigger3 = root,stateno = 601
trigger4 = root,stateno = 620
trigger5 = root,stateno = [3000,3900]
trigger6 = time >= 80
trigger6 = roundstate > 2
trigger7 = root,stateno = 1100 || root,stateno = 1400
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1
;---------------------------------------------------------------------------
;Tenterafoo
[Statedef 6130]
type = A
movetype = A
physics = N
Anim = 6130
ctrl = 0
sprpriority = 5
velset = 15,0

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,4

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,7

[State 1001,]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 1001,]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 1001,]
type = null;AfterImage
trigger1 = Time = 0
time = -1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 0, Explod]
type = Explod
trigger1 = time <= 12
anim = 6710
pos = 0,0
bindtime = 1
sprpriority = 2
scale = .5,.5
ownpal = 1
bindtime = -1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time <= 12
anim = 6808
pos = 40-random%100,15-random%30
bindtime = 1
sprpriority = 2
scale = .2,.2
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time <= 12
anim = 6810
pos = 40-random%100,15-random%30
bindtime = 1
sprpriority = 6
scale = .6,.6
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype != A
trigger1 = !movecontact && !movereversed
attr = A, SP
damage    = ceil(35*root,fvar(4)),3
hitflag = MAFD
guardflag = LA
priority = 3
pausetime = 0,15
sparkno = 2
sparkxy = -10,0
hitsound   = S5,2
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 20
guard.ctrltime = 12
ground.velocity = -2,-5
air.velocity = -2,-5
air.hittime = 16
fall = 1
fall.recovertime = 30
Palfx.time       = ceil(25*(root,fvar(11)))
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype = A
trigger1 = !movecontact && !movereversed
attr = A, SP
damage    = ceil(50*root,fvar(4)),3
hitflag = MAFD
guardflag = LA
priority = 3
pausetime = 0,20
sparkno = 2
sparkxy = -10,0
hitsound   = S5,2
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 20
guard.ctrltime = 12
ground.velocity = -2,-5
air.velocity = -2,-5
air.hittime = 16
fall = 1
fall.recover = 0
Palfx.time       = ceil(35*(root,fvar(11)))
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0

[State 200,]
type = velset
trigger1 = movehit = 1
x = 0
ignorehitpause = 1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State 200,]
type = targetstate
trigger1 = movehit = 1
value = 5145
ignorehitpause = 1

[State 600]
Type = Helper
trigger1 = movehit = 1
trigger1 = numhelper(6805) < 1
trigger1 = enemynear,stateno = [5145,5147]
StateNo = 6805
ID = 6805
Name = "Frozen"
pos = -10,0
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 200,]
type = changestate
trigger1 = movehit
trigger1 = enemynear,stateno = 5145
value = 6131
ignorehitpause = 1

[State 200, Damage Scaling]
type = parentvarset
trigger1 = movehit
trigger1 = !moveguarded
fvar(4) = root,fvar(4)*0.95
ignorehitpause = 1
persistent = 0

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = 1.2
ignorehitpause = 1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

[State 1001,]
type = Destroyself
trigger1 = FrontEdgeDist <= -40
trigger2 = animtime = 0
;======================================================================================================================================================
;Tentarafoo Hitbox
[Statedef 6131]
type = S
physics = N
movetype = A
anim = 6131
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, HB]
type = nothitby
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1

[State 1350, HB]
type = statetypeset
trigger1 = animelemtime(3) >= 0
movetype = I
ignorehitpause = 1

[State 1350, Assert]
type = posset
trigger1 = numtarget
x = target,pos x
ignorehitpause = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1350, Hit]
type = hitdef
trigger1 = !movecontact && !movereversed
priority = 4, Hit
attr = S, HA
damage = ceil(75*root,fvar(4)), 7
animtype = Hard
hitflag = MAFD
guardflag = 
pausetime = 0, 10
sparkno = 3
sparkxy = 0, -50
hitsound = S5,7
guardsound = S6, 0
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = 0, -8
ground.cornerpush.veloff = 0
air.velocity = 0, -8
fall = 1
air.fall = 1
fall.recovertime = 33
airguard.ctrltime = 16
airguard.velocity = -4, -1.5
envshake.time = 10
envshake.freq = 80
nochainID = 8000

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = 1.2
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Artemesia Bufula
[Statedef 2140]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2140
sprpriority = -2

[State 1102]
type = parentvarset
trigger1 = animelemtime(6) >= 0
var(36) = 1

[State 1102]
type = parentvaradd
trigger1 = animelemtime(6) >= 0
var(38) = 1
persistent = 0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = screenbound
trigger1 = 1
value = 1
ignorehitpause = 1

[State 1200, 6]
type = width
trigger1 = 1
edge = 55,10
ignorehitpause = 1

[State 1102]
type = parentvarset
trigger1 = animelemtime(4) >= 3
var(37) = 1

[State -2]
type = Helper
Trigger1 = animelemtime(4) = 2
helpertype = normal
name = "Bufula"
ID = 6140
Stateno = 6140
pos = 46,-85
PosType = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.33
size.yscale = 0.33
persistent = 0

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 210, 5]
type = Changestate
trigger1 = var(5) >= 80
trigger2 = root,stateno = 411
trigger3 = root,stateno = 601
trigger4 = root,stateno = 620
trigger5 = root,stateno = [3000,3900]
trigger6 = time >= 80
trigger6 = roundstate > 2
trigger7 = root,stateno = 1100 || root,stateno = 1300
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;---------------------------------------------------------------------------
;Bufula
[Statedef 6140]
type = A
movetype = A
physics = N
Anim = 6140
ctrl = 0
sprpriority = 5
velset = 0,0

[State 1102]
type = varadd
trigger1 = time
var(12) = 1

[State 1102]
type = AngleDraw
trigger1 = time < 8
scale = time*.1,time*.1
ignorehitpause = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1
persistent = 1

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,5

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,7

[State 195, 1]
type = veladd
trigger1 = vel x < 1
x = 0.05

[State 1001,]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 1001,]
type = NotHitBy
trigger1 = 1
value = ,AA,AT
time = 1
ignorehitpause = 1

[State 1001,]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 6141
time = -1
ignorehitpause = 1

[State 1001,]
type = Trans
trigger1 = 1
trans = Add

[State 1001,]
type = null;AfterImage
trigger1 = Time = 0
time = -1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) >= 0
anim = 6808
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 2
scale = .2,.2
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) >= 0
anim = 6810
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 6
scale = .6,.6
ownpal = 1
vel = 0,0
removeongethit = 1

[State 1102]
type = varadd
trigger1 = movecontact = 1
var(10) = 1

[State 600, 2]
type = HitDef
triggerall = root,var(38) < 2
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype != A
trigger1 = !movecontact && !movereversed || movecontact = 20 || movereversed = 20
attr = A, SP
damage    = ceil(10*root,fvar(4)),3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 5,8
sparkno = 3
sparkxy = -10,0
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 25
ground.velocity = 0,-5
air.velocity = 0,-5
air.hittime = 16
fall = 1
fall.recovertime = ceil(21+33*(root,fvar(11)))
Palfx.time       = ceil(25*(root,fvar(11)))
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = 5

[State 600, 2]
type = HitDef
triggerall = root,var(38) >= 2
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype != A
trigger1 = !movecontact && !movereversed || movecontact = 20 || movereversed = 20
attr = A, SP
damage    = ceil(10*root,fvar(4)),3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 5,8
sparkno = 3
sparkxy = -10,0
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 25
ground.velocity = 0,-8
air.velocity = 0,-8
air.hittime = 16
fall = 1
fall.recovertime = 13
Palfx.time       = 13
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = 5

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype = A
trigger1 = !movecontact && !movereversed || movecontact = 20 || movereversed = 20
attr = A, SP
damage    = ceil(20*root,fvar(4)),3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 5,8
sparkno = 3
sparkxy = -10,0
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 25
ground.velocity = 0,-5
air.velocity = 0,-5
air.hittime = 16
fall = 1
fall.recover = 0
Palfx.time       = ceil(35*(root,fvar(11)))
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = 5

[State 200, Damage Scaling]
type = null;parentvarset
trigger1 = var(10) > 2
trigger1 = movehit
trigger1 = !moveguarded
fvar(4) = root,fvar(4)*0.89
ignorehitpause = 1
persistent = 0

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = 1.2
ignorehitpause = 1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State 1001,]
type = ChangeState
trigger1 = var(10) > 2
trigger1 = movecontact
trigger2 = var(12) >= 360
value = 6143

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

[State 200, 2]
type = destroyself
trigger1 = frontedgedist < -50

;---------------------------------------------------------------------------
;Bufula Knocked Back
[Statedef 6141]
type = A
movetype = A
physics = N
Anim = 6140
ctrl = 0
sprpriority = 5
velset = -2,0

[State 1102]
type = varadd
trigger1 = time
var(12) = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1
persistent = 1

[State 195, 1]
type = veladd
trigger1 = vel x < 1
x = 0.05

[State 1001,]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 1001,]
type = NotHitBy
trigger1 = 1
value = ,AA,AT
time = 1
ignorehitpause = 1

[State 1001,]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 6141
time = -1
ignorehitpause = 1

[State 1001,]
type = Trans
trigger1 = 1
trans = Add

[State 1001,]
type = null;AfterImage
trigger1 = Time = 0
time = -1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) >= 0
anim = 6808
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 2
scale = .2,.2
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelemtime(5) >= 0
anim = 6810
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 6
scale = .6,.6
ownpal = 1
vel = 0,0
removeongethit = 1

[State 1102]
type = varadd
trigger1 = movecontact = 1
var(10) = 1

[State 600, 2]
type = HitDef
triggerall = root,var(38) < 2
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype != A
trigger1 = !movecontact && !movereversed || movecontact = 20 || movereversed = 20
attr = A, SP
damage    = ceil(10*root,fvar(4)),3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 5,8
sparkno = 3
sparkxy = -10,0
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 25
ground.velocity = 0,-5
air.velocity = 0,-5
air.hittime = 16
fall = 1
fall.recovertime = ceil(21+33*(root,fvar(11)))
Palfx.time       = ceil(25*(root,fvar(11)))
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = 5

[State 600, 2]
type = HitDef
triggerall = root,var(38) >= 2
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype != A
trigger1 = !movecontact && !movereversed || movecontact = 20 || movereversed = 20
attr = A, SP
damage    = ceil(10*root,fvar(4)),3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 5,8
sparkno = 3
sparkxy = -10,0
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 25
ground.velocity = 0,-8
air.velocity = 0,-8
air.hittime = 16
fall = 1
fall.recovertime = 13
Palfx.time       = 13
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = 5

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype = A
trigger1 = !movecontact && !movereversed || movecontact = 20 || movereversed = 20
attr = A, SP
damage    = ceil(20*root,fvar(4)),3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 5,8
sparkno = 3
sparkxy = -10,0
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 25
ground.velocity = 0,-5
air.velocity = 0,-5
air.hittime = 16
fall = 1
fall.recover = 0
Palfx.time       = ceil(35*(root,fvar(11)))
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = 5

[State 200, Damage Scaling]
type = null;parentvarset
trigger1 = var(10) > 2
trigger1 = movehit
trigger1 = !moveguarded
fvar(4) = root,fvar(4)*0.89
ignorehitpause = 1
persistent = 0

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = 1.2
ignorehitpause = 1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 9999

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State 1001,]
type = ChangeState
trigger1 = var(10) > 2
trigger1 = movecontact
trigger2 = var(12) >= 360
value = 6143

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

[State 200, 2]
type = destroyself
trigger1 = frontedgedist < -50

;======================================================================================================================================================
;Bufula End
[Statedef 6143]
type = S
physics = N
movetype = I
ctrl = 0
sprpriority = 5

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,6

[State 0,]
type = angledraw
trigger1 = 1
scale = 1+(time*.05),1+(time*.05)

[State 0,]
type = velmul
trigger1 = 1
x = .2
y = .2

[State 1]
type = AfterImage
trigger1 = Time = 0
time = 1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, HB]
type = nothitby
trigger1 = 1
time = -1
value = SCA, AA
ignorehitpause = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256-ceil(time*20), 256
ignorehitpause = 1
persistent = 1

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = prevstateno != 1175
triggerall = prevstateno != [3060,3081]
trigger1 = time <= 20
anim = 6808
pos = 20-random%40,80-random%130
bindtime = 1
sprpriority = 2
scale = .4,.4
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = prevstateno != 1175
triggerall = prevstateno != [3060,3081]
trigger1 = time <= 20
anim = 6810
pos = 20-random%40,80-random%130
bindtime = 1
sprpriority = 6
scale = .9,.9
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = prevstateno = 1175
trigger1 = time <= 20
anim = 6808
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 2
scale = .4,.4
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = prevstateno = 1175
trigger1 = time <= 20
anim = 6810
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 6
scale = .9,.9
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = prevstateno = [3060,3081]
trigger1 = time <= 20
anim = 6800
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 2
scale = .4,.4
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = prevstateno = [3060,3081]
trigger1 = time <= 20
anim = 6810
pos = 20-random%40,50-random%100
bindtime = 1
sprpriority = 6
scale = .9,.9
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = time >= 75
;---------------------------------------------------------------------------
;Artemesia Bufudyne
[Statedef 2350]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2350
sprpriority = -2

[State 1102]
type = parentvarset
trigger1 = animelemtime(6) >= 0
var(36) = 1

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1
pausemovetime = 9999
supermovetime = 9999

[State 0]
type = playsnd
triggerall = Prevstateno != [2000,2999]
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
triggerall = Prevstateno != [2000,2999]
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
triggerall = Prevstateno != [2000,2999]
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 1200, 6]
type = screenbound
trigger1 = 1
value = 0
ignorehitpause = 1

[State -2]
type = null;Helper
Trigger1 = animelem = 6
helpertype = normal
name = "Marin Karin"
ID = 6110
Stateno = 6110
pos = 72,-133
PosType = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.33
size.yscale = 0.33
persistent = 0

[State 210, 5]
type = hitby
trigger1 = 1
value = SCA, AA, AP
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP
stateno = 2550
ignorehitpause = 1
persistent = 1

[State 210, 5]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[State 210, 5]
type = Changestate
triggerall = time >= 50
trigger1 = numhelper(6350)
trigger1 = helper(6350),stateno = 6353
trigger2 = !numhelper(6350)
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;---------------------------------------------------------------------------
;Bufudyne
[Statedef 6350]
type = A
movetype = A
physics = N
Anim = 6350
ctrl = 0
sprpriority = -3
velset = 0,0

[State 1102]
type = varadd
trigger1 = time
var(12) = 1

[State 1102]
type = null;AngleDraw
trigger1 = 1
value = -35
ignorehitpause = 1

[State 1102]
type = AngleDraw
trigger1 = animelemtime(2) < 0
scale = time*.1,time*.1
ignorehitpause = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1
persistent = 1

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,5

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,7

[State 1001,]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1

[State 1001,]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 1001,]
type = Trans
trigger1 = 1
trans = Add

[State 1001,]
type = null;AfterImage
trigger1 = Time = 0
time = -1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 0, Explod]
type = Explod
trigger1 = time
anim = 6808
pos = 0+random%120,50-random%200
bindtime = 1
sprpriority = 2
scale = .2,.2
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time
anim = 6810
pos = 0+random%120,50-random%200
bindtime = 1
sprpriority = 6
scale = .6,.6
ownpal = 1
vel = 0,0
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = time
anim = 6808
pos = 70+random%120,-90-random%130
bindtime = 1
sprpriority = 2
scale = .2,.2
ownpal = 1
vel = 0,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time
anim = 6810
pos = 70+random%120,-90-random%130
bindtime = 1
sprpriority = 6
scale = .6,.6
ownpal = 1
vel = 0,0
removeongethit = 1

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype != H
trigger1 = enemynear,movetype != A
trigger1 = !movecontact && !movereversed
attr = A, HP
damage = ceil((220+(44*numhelper(9884)))*(root,fvar(4))),5
hitflag = MAFD
guardflag = M
priority = 3
pausetime = 25,25
guard.pausetime = 5,5
sparkno = 3
sparkxy = -10,ceil(p2dist Y - 50)
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 5
ground.velocity = -2,-3
air.velocity = -2,-3
air.hittime = 16
fall = 1
fall.recovertime = 0
Palfx.time       = 25
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = -3

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype = H
trigger1 = !movecontact && !movereversed
attr = A, HP
damage = ceil((220+(44*numhelper(9884)))*(root,fvar(4))),5
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 25,25
guard.pausetime = 5,5
sparkno = 3
sparkxy = -10,ceil(p2dist Y - 50)
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 5
ground.velocity = -2,-3
air.velocity = -2,-3
air.hittime = 16
fall = 1
fall.recovertime = 0
Palfx.time       = 25
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = -3

[State 600, 2]
type = HitDef
trigger1 = enemynear,stateno != [5200,5210]
trigger1 = enemynear,movetype = A
trigger1 = !movecontact && !movereversed
attr = A, HP
damage = ceil((275+(55*numhelper(9884)))*(root,fvar(4))),5
hitflag = MAFD
guardflag = M
priority = 3
pausetime = 25,25
guard.pausetime = 10,10
sparkno = 3
sparkxy = -10,ceil(p2dist Y - 50)
hitsound   = S5,4
guardsound = S6,0
animtype = Med
ground.type = low
ground.slidetime = 6
ground.hittime  = 40
guard.ctrltime = 25
ground.velocity = -2,-3
air.velocity = -2,-3
air.hittime = 16
fall = 1
fall.recover = 0
Palfx.time       = 25
Palfx.time       = 30
Palfx.add       = 0,104,252
Palfx.sinadd   = 0,30,40,10
Palfx.color     = 64
Palfx.invertall = 0
getpower = 0,0
p1sprpriority = -3

[State 200, Damage Scaling]
type = parentvarset
trigger1 = movehit
fvar(4) = root,fvar(4)*0.75
ignorehitpause = 1
persistent = 0

[State 3000, 1]
type = PlaySnd
trigger1 = movehit = 1
trigger1 = !moveguarded
value = 3001, 1
ignorehitpause = 1
persistent = 0

[state 19001 BF]
type = explod
trigger1 = movehit = 1
trigger1 = !moveguarded
anim = 6985
pos = 0,0
bindtime = -1
postype = back
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
scale = .85,.85
ignorehitpause = 1
persistent = 0
sprpriority = -4

[State 200,]
type = targetstate
trigger1 = root,var(24) = 0
trigger1 = movehit = 1
value = 5146
ignorehitpause = 1
persistent = 0

[State 200,]
type = targetstate
trigger1 = enemynear,stateno != 5146
trigger1 = root,var(24) != 0
trigger1 = movehit = 1
value = 5147
ignorehitpause = 1
persistent = 0

[State 200,]
type = parentvarset
trigger1 = enemynear,stateno = 5146
trigger1 = movehit
var(24) = 1
ignorehitpause = 1
persistent = 0

[State 600]
Type = Helper
trigger1 = movehit = 1
trigger1 = numhelper(6805) < 1
trigger1 = enemynear,stateno = [5145,5147]
StateNo = 6805
ID = 6805
Name = "Frozen"
pos = -10,0
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 200, Damage Scaling]
type = parentvarset
trigger1 = movehit
trigger1 = !moveguarded
fvar(4) = root,fvar(4)*0.80
ignorehitpause = 1
persistent = 0

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = 1.2
ignorehitpause = 1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod]
type = Explod
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State 1300]
type = helper
trigger1 = movecontact = 1
helpertype = normal
stateno = 7777
ID = 7777
name = "You May Rapid"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 0
pausemovetime = 9999

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State 1001,]
type = ChangeState
trigger1 = time >= 45
value = 6353

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

;======================================================================================================================================================
;Bufudyne End
[Statedef 6353]
type = S
physics = N
movetype = I
ctrl = 0
sprpriority = -3

[State 195, 1]
type = playsnd
trigger1 = !time
value = 400,6

[State 0,]
type = angledraw
trigger1 = 1
scale = 1-(time*.01),1-(time*.01)

[State 0,]
type = velmul
trigger1 = 1
x = .2
y = .2

[State 1]
type = AfterImage
trigger1 = Time = 0
time = 1
PalBright = 0,0,0
PalContrast =  222,222,222
PalAdd      = -1,-1,-1
PalMul      = .5,.5,.5
Trans = Add
TimeGap  = 1
FrameGap = 2
length = 18

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, HB]
type = nothitby
trigger1 = 1
time = -1
value = SCA, AA
ignorehitpause = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256-ceil(time*20), 256
ignorehitpause = 1
persistent = 1

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time <= 20
anim = 6808
pos = 0+random%120,50-random%200
bindtime = 1
sprpriority = 2
scale = .4,.4
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time <= 20
anim = 6810
pos = 0+random%120,50-random%200
bindtime = 1
sprpriority = 6
scale = .9,.9
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time <= 20
anim = 6808
pos = 70+random%120,-90-random%130
bindtime = 1
sprpriority = 2
scale = .4,.4
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time <= 20
anim = 6810
pos = 70+random%120,-90-random%130
bindtime = 1
sprpriority = 6
scale = .9,.9
ownpal = 1
vel = -1,0
removeongethit = 1
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = time >= 75

;---------------------------------------------------------------------------
;Artemesia Exit
[Statedef 2500]
type    = S
movetype= I
physics = S
poweradd = 0
ctrl = 0
sprpriority = -2

[State 210, 5]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1
persistent = 1

[State 6800, flames]
type = explod
trigger1 = time < 7
anim = 6802
ID = 6802
sprpriority = -3
random=120,10
vel = 0,-9-random%5
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 6800, flames]
type = explod
trigger1 = time < 7
anim = 6802
ID = 6802
sprpriority = -1
random=120,10
vel = 0,-9-random%5
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0]
type = playsnd
trigger1 = !time
value = 2000,3

[State 0]
type = angledraw
trigger1 = 1
scale = 1-(0.01*(time-0)),1+(0.01*(time-0))

[State 0]
type=Trans
trigger1=1
trans=addalpha
alpha=256-(25*(time-0)),25*(time-0)

[State 0]
type = Destroyself
trigger1 = Time >= 60
trigger2 = Time >= 30
trigger2 = numhelper(2000) > 1

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

;---------------------------------------------------------------------------
;Artemesia Damaged
[Statedef 2550]
type    = S
movetype= H
physics = S
poweradd = 0
ctrl = 0
sprpriority = -2

[State 210, 5]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1
persistent = 1

[State 0]
type = playsnd
trigger1 = !time
value = 2000,0

[State 0]
type = playsnd
trigger1 = !time
value = 2000,2

[State 0]
type = angledraw
trigger1 = 1
scale = 1-(0.01*(time-0)),1+(0.01*(time-0))

[State 8000, ]
type = palfx
trigger1 = animelem = 1
time = 1
add = 255,0,0

[State 1300]
type = helper
trigger1 = gethitvar(damage) > 0
trigger1 = !time
helpertype = normal
stateno = 7778
ID = 7778
name = "Ouch!"
postype = p1
pos = 0, 0
ownpal = 1
ignorehitpause = 1

[State ]
type = Explod
trigger1 = !time
anim = 6501
ID = 6501
pos = 0,-70
scale = 1.2,1.2
facing = ifelse(random%2,1,-1)
vfacing = 1
postype = p1
ownpal = 1
vel = 0,0
bindtime = 1
sprpriority = 5
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0]
type=Trans
trigger1=1
trans=addalpha
alpha=256-(20*(time-0)),20*(time-0)

[State 0]
type = Destroyself
trigger1 = Time = 10
trigger2 = Time >= 30
trigger2 = numhelper(2000) > 1

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;---------------------------------------------------------------------------
;Artemesia Burst
[Statedef 2800]
type    = S
movetype= I
physics = S
poweradd = 0
ctrl = 0
anim = 8001
sprpriority = -2

[State 8000,]
type = Turn
trigger1 = root,stateno = 8000
trigger1 = facing * enemynear(0),facing = 1

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 210, 5]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1
persistent = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
trigger1 = time > 1
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
trigger1 = time > 1
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
trigger1 = time > 1
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,0
bindtime = 1
persistent = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
trigger1 = time > 1
anim = 6800
ID = 6800
sprpriority = -3
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
trigger1 = time > 1
anim = 6800
ID = 6800
sprpriority = -2
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1

[State 6800, flames]
type = explod
triggerall = Prevstateno != [2000,2999]
trigger1 = time < 7
trigger1 = time > 1
anim = 6800
ID = 6800
sprpriority = -1
random=80,10
vel = -2+random%4,-5-random%3
scale=.4,.4
pos = 0,-30
bindtime = 1
persistent = 1

[State 0]
type = playsnd
trigger1 = !time
value = 2000,1

[State 0]
type=Trans
trigger1=1
trans=addalpha
alpha=25*(time-0),256-(25*(time-0))

[State 0]
type = angledraw
trigger1 = time < 5
scale =0.3*(time-0),1

[State 0]
type = angledraw
trigger1 = time >4
trigger1 = time <10
scale = 1.5-(0.1*(time-4)),1

[State 210, 5]
type = Changestate
trigger1 = root,stateno != [8000,8060]
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

;======================================================================================================================================================
;Niflheim Whip
[Statedef 2390]
type = A
physics = N
movetype = A
anim = 2390
ctrl = 0
velset = 0, 0
sprpriority = -1

[State 200, 2]
type = PlaySnd
trigger1 = !time
value = 0, 4

[State 200, 2]
type = PlaySnd
trigger1 = animelemtime(4) = 7
value = 0, 5

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 600, 2]
type = HitDef
trigger1 = !movecontact && !movereversed
attr = A, HP
damage    = ceil(65*root,fvar(4)),0
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 10,22
sparkno = 3
sparkxy = 0,-100
hitsound   = S5,7
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 5
ground.hittime  = 24
guard.ctrltime = 22
ground.velocity = 3,-12
air.velocity = 3,-12
air.hittime = 16
fall = 1
fall.recover = 0
nochainID = 8000
p2facing = 1
p2sprpriority = 0
kill = 0
p2stateno = 5390
getpower = 0,0

[State 1200, 6]
type = explod
trigger1 = animelem = 3
anim = 6621
id = 6621
pos = 0,-66
facing = 1
sprpriority = 4
bindtime = -1
ownpal = 1
vfacing = 1
ignorehitpause = 1
scale = 0.39,0.6

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 1
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod]
type = Explod
triggerall = roundstate = 2
triggerall = numenemy
triggerall = root,var(56) = 1 && numexplod(13000) = 0 && teamside = 2
triggerall = enemy, movetype = h
trigger1 = movehit
anim = 9888
pos = -65,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
id = 13000
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Dampener]
type = attackmulset
trigger1 = 1
value = root,fvar(5)
ignorehitpause = 1

[State -2, Ultra Bust Active]
type = attackmulset
triggerall = root,fvar(19) > 0
trigger1 = 1
value = (root,fvar(5))*1.2
ignorehitpause = 1

[State 200, 2]
type = varset
trigger1 = Movecontact = 1
var(1) = 1
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = animtime = 0

[State 1350, End]
type = destroyself
trigger1 = time >= 90
trigger1 = pos x != [ -250, 250]

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

;---------------------------------------------------------------------------
;Artemesia Niflheim
[Statedef 2395]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 2395
sprpriority = -2
velset = 0,0

[State 1]
type = varset
trigger1 = !time
var(5) = 0

[State 1]
type = playerpush
trigger1 = 1
value = 1

[State 1]
type = varadd
trigger1 = time
trigger1 = var(0)=root,var(18)
var(5) = 1

[State 200, 2]
type = PlaySnd
trigger1 = time = 65
value = 0, 5

[State 210, 5]
type = Changeanim
trigger1 = time = 70
value = 2396

[State 1200, 6]
type = explod
trigger1 = time = 70
anim = 6931
ID = 6931
facing = 1
postype = p1
pos = 0,-60
sprpriority = 4
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
persistent = 0
bindtime = 1
scale = 3,.6

[State 3000, Super D]
type = envshake
trigger1 = time = 70
time = 8
freq = 120
ampl = -3

[State 210, 5]
type = Changestate
trigger1 = time >= 100
value = 2500
ctrl = 0

[State Pause]
type=changeanim
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18) ;Since supermovetime is enabled there will be a difference in the values when the root is paused
value=anim
elem=animelemno(0)
[State Pause]
type=posfreeze
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
[State Reinitialize]
type = varset
triggerall=root,roundstate=2
trigger1=var(0)!=root,var(18)
var(0) = root,var(18)
[State Root Time]
type=varadd
trigger1=1
var(0)=1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5050
value = 6050
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5070
value = 6070
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5071
value = 6071
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5080
value = 6080
ignorehitpause = 1

[State -2, Custom Fall State]
type = targetstate
triggerall = numtarget
trigger1 = target,stateno = 5081
value = 6081
ignorehitpause = 1

;======================================================================================================================================================
;Myriad Beam
[Statedef 3930]
type    = S
movetype= I
physics = S
poweradd = 0
anim = 3930
ctrl = 0
velset = 0,5
sprpriority = 6

[State 0, AngleDraw]
type = velmul
trigger1 = time = 20
y = .1

[State 0, AngleDraw]
type = velset
trigger1 = time = 200
y = 70

[State 0, AngleDraw]
type = velset
trigger1 = time = 205
y = 0

[State 210, 5]
type = playsnd
trigger1 = !time
value = 3901,4
persistent = 0

[State 6800, flames]
type = explod
trigger1 = 1
anim = 6980
ID = 6980
sprpriority = 8
scale=.5,.5
pos = -80+random%160,0-random%90
vel = 0,-30-random%10
bindtime = 1
persistent = 1

[State 6800, flames]
type = explod
trigger1 = time >= 200
anim = 6970
ID = 6970
sprpriority = 8
scale=.2,.2
pos = -150+random%300,-300-random%450
vel = 0,0
bindtime = 1
persistent = 1

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0]
type=Trans
trigger1=1
trans=addalpha
alpha=256,256

[State 0]
type = Destroyself
trigger1 = root,stateno != 3903

;======================================================================================================================================================
;Fade Away
[Statedef 6000]
type    = S
movetype= I
physics = S
poweradd = 0
ctrl = 0

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0]
type=Trans
trigger1=1
trans=addalpha
alpha=256-(25*(time-0)),256

[State 0]
type = Destroyself
trigger1 = Time = 90

;======================================================================================================================================================
;current
[Statedef 6001]
type    = S
movetype= I
physics = S
poweradd = 0
anim = 6000
ctrl = 0
sprpriority = -2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 10+random%160

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0]
type=Trans
trigger1=1
trans=addalpha
alpha=256,256

[State 0]
type = Destroyself
trigger1 = animtime = 0

;======================================================================================================================================================
;Shock
[Statedef 6801]
type    = S
movetype= A
physics = N
juggle  = 4
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 6

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 9
y = 9

[State 6800, flames]
type = explod
trigger1 =enemynear,statetype != L
anim = 6801
;ID = 6801
sprpriority = 6
postype = p2
random=50,95
scale=.3,.3
pos = (enemynear,const(size.mid.pos.x)),(enemynear,const(size.mid.pos.y));+90
bindtime = 4

[State 6800, flames]
type = explod
trigger1 =enemynear,statetype = L
anim = 6801
;ID = 6801
sprpriority = 6
postype = p2
random=50,95
scale=.3,.3
pos = (enemynear,const(size.mid.pos.x)),0
bindtime = 4

[State 6800, 5]
type = destroyself
trigger1 =p2movetype!=H||p2statetype=L||time>120||root,stateno=5150

;======================================================================================================================================================
;Flash
[Statedef 6803]
Type    = S                      
MoveType= I                      
Physics = N 
Ctrl = 0
Anim = 6804
SprPriority = 9

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State Assert, 1]
type = assertspecial
Trigger1 = 1 
flag = noshadow

[State 0]
type=Trans
trigger1=time >= 60
trans=addalpha
alpha=256-(20*(time-60)),256

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = time*2
scale = 0+time*0.065,0+time*0.065

[State 0, DestroySelf]
type = destroyself
trigger1 = time >= 240

;======================================================================================================================================================
;Cross Slash Effect
[Statedef 6305]
Type    = S                      
MoveType= I                      
Physics = N 
Ctrl = 0
Anim = 6305
SprPriority = -5

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, Explod]
type = Explod
trigger1 = Time >= 3
trigger1 = Time%4 = 0
anim = 6801
pos = -180+random%180,0
random = 70,50
postype = p1
scale = 0.75,0.75
bindtime = 1
sprpriority = -3
vel = 20+random%10,0
ignorehitpause = 1
ownpal = 1
persistent = 1
supermovetime = 999
pausemovetime = 999

[State 0, Explod]
type = Explod
trigger1 = Time >= 3
trigger1 = Time%4 = 0
anim = 6801
pos = -180+random%180,0
random = 70,50
postype = p1
scale = 0.75,0.75
bindtime = 1
sprpriority = -3
vel = 20+random%10,0
ignorehitpause = 1
ownpal = 1
persistent = 1
supermovetime = 999
pausemovetime = 999

[State Assert, 1]
type = assertspecial
Trigger1 = 1 
flag = noshadow

[State 200]
type = PlaySnd
trigger1 = !time
value = 1200,0

[State 0, AngleDraw]
type = null;AngleDraw
trigger1 = time < 10
scale = 3,0+time*0.01

[State 0, DestroySelf]
type = changestate
trigger1 = root,stateno != [3000,3005]
value = 6000

;======================================================================================================================================================
;Cross Slash Effect
[Statedef 6306]
Type    = S                      
MoveType= I                      
Physics = N 
Ctrl = 0
Anim = 6305
SprPriority = -5

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State Assert, 1]
type = assertspecial
Trigger1 = 1 
flag = noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 90

[State 200]
type = PlaySnd
trigger1 = !time
value = 1200,0

[State 0, DestroySelf]
type = changestate
trigger1 = root,stateno != [3000,3005]
value = 6000

;---------------------------------------------------------------------------
;Tarrot Card
[Statedef 6500]
type     = A
movetype = I
physics  = N
velset   = 0,0
ctrl     = 0
anim     = 6500
sprpriority = 3

[State 0]
type=Trans
triggerall = 1
trigger1=1
trans=addalpha
alpha=50*(time-0),256-(50*(time-0))

[State ]
type = AngleSet
trigger1 = time >= 0
value = 1

[State ]
type = AngleAdd
trigger1 = time = 0
value = 1

[State ]
type = AngleDraw
trigger1 = time >= 0
scale = fvar(5),1

[State ]
type = VarSet
trigger1 = time = 0
fvar(5) = 0

[State ]
type = VarSet
trigger1 = time = 0
var(13) = 0

[State ]
type = VarSet
trigger1 = fvar(5) >= 1
fvar(5) = 1

[State ]
type = VarSet
trigger1 = fvar(5) <= -1
fvar(5) = -1

[State ]
type = VarSet
trigger1 = fvar(5) = 1
var(13) = 1

[State ]
type = VarSet
trigger1 = fvar(5) = -1
var(13) = 0

[State -2]
type = VarAdd
triggerall = var(13) = 1
trigger1 = gametime % 1 = 0
fvar(5) = -0.2

[State -2]
type = VarAdd
triggerall = var(13) = 0
trigger1 = gametime % 1 = 0
fvar(5) = 0.2

[State -1]
type     = NotHitBy
trigger1 = 1
value    = SCA
ignorehitpause = 1

[State ]
type = null;PlaySnd
triggerall = root,stateno != 420 && root,stateno != 440
trigger1 = time = 9
value = 241, 0

[State ]
type = bindtoparent
trigger1 = root,stateno = [3005,3055]
pos= 11,-154

[State ]
type = null;bindtoparent
trigger1 = root,stateno = 3900
pos= 0,-60

[State ]
type = velset
trigger1 = root,stateno = 3900
y = .5

[State -1]
type     = Destroyself
trigger1 = root,stateno = 3005
trigger1 = root,animelem = 8 || root,movetype = H
trigger2 = root,stateno = [3050,3055]
trigger2 = root,animelem = 14 || root,movetype = H
trigger31 = root,stateno = 3900
trigger3 = root,animelem = 14 || root,movetype = H

;[State -1]
;type     = changeanim
;triggerall = root,stateno = 420 || root,stateno = 440
;trigger1 = time = 0
;value = 244
;
;[State -1]
;type     = Destroyself
;triggerall = root,stateno != 420 && root,stateno != 440
;trigger1 = time = 10 || root,movetype = H
;
;[State -1]
;type     = Destroyself
;triggerall = root,stateno = 420 || root,stateno = 440
;trigger1 = time = 7 || root,movetype = H

;======================================================================================================================================================
;Stab Effect
[Statedef 3115]
Type    = S                      
MoveType= I                      
Physics = N 
Ctrl = 0
Anim = 3904
SprPriority = 183

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -60
scale = 1-time*0.1,2

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 10

;======================================================================================================================================================
;Aura
[Statedef 3959]
type = A
movetype = I
physics = N
Anim = 9999
sprpriority = -3

[State NotH, 1]
type = NotHitBy
Trigger1 = Time >= 0
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State Assert, 1]
type = assertspecial
Trigger1 = 1 
flag = noshadow
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State BindToR, 1]
type = Bindtoroot
Trigger1 = 1
Time = -1
facing = 1
pos = 0,0
ignorehitpause = 1

[State ChangeA, 1]
type = changeanim
trigger1 = root,numexplod(5999) = 0
value = 9999
ignorehitpause = 1

[State ChangeA, 1]
type = ChangeAnim
trigger1 = root,numexplod(5999)
trigger1 = time >= 0
value = root,anim
elem  = root,animelemno(-1)
persistent = 1
ignorehitpause = 1
ignorehitpause = 1

[State Pal, 1]
type = PalFX
trigger1 = 1
time = 1
add = 85,0,0
mul = var(18),0,0
ignorehitpause = 1

[State VarS, 1]
type = Varset
trigger1 = time = 0
ignorehitpause = 1
var(17) = 110
ignorehitpause = 1

[State VarA, 1]
type = Varadd
trigger1 = time >= 0
ignorehitpause = 1
var(17) = -8
ignorehitpause = 1

[State Trans, 1]
type = Trans
trigger1 = time >= 0
trans = addalpha
alpha = var(17),256
ignorehitpause = 1

[State VarS, 1]
type = Varset
trigger1 = time = 0
ignorehitpause = 1
var(18) = 128
ignorehitpause = 1

[State VarA, 1]
type = Varadd
trigger1 = time >= 0
ignorehitpause = 1
var(18) = 1
ignorehitpause = 1

[State AngleD, 1]
type = AngleDraw
trigger1 = 1
scale = fvar(1),fvar(1)
ignorehitpause = 1

[State VarS, 1]
type = Varset
Trigger1 = time = 0
ignorehitpause = 1
fvar(1) = 0.33
ignorehitpause = 1

[State VarS, 1]
type = Varadd
Trigger1 = time >= 0
ignorehitpause = 1
fvar(1) = root,fvar(19)*.000008
ignorehitpause = 1

[State Destroy, 1]
type = Destroyself
Trigger1 = time >= 8

;---------------------------------------------------------------------------
;Ice gather
[Statedef 6981]
type    = S                      
movetype= I                     
physics = N                                          
ctrl = 0                         
anim = 9999                
poweradd = 0    
velset = 0,0   
sprpriority = 5      

[State 0, Trans]
type = Trans
trigger1 = 1

[State 600]
Type = Helper
trigger1 = !time
StateNo = 6983
ID = 6983
Name = "Rubble"
Pos = -180+random%360,-180+random%360
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = !time
StateNo = 6983
ID = 6983
Name = "Rubble"
Pos = -180+random%360,-180+random%360
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = !time
StateNo = 6983
ID = 6983
Name = "Rubble"
Pos = -180+random%360,-180+random%360
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = !time
StateNo = 6983
ID = 6983
Name = "Rubble"
Pos = -180+random%360,-180+random%360
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = !time
StateNo = 6983
ID = 6983
Name = "Rubble"
Pos = -180+random%360,-180+random%360
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = !time
StateNo = 6983
ID = 6983
Name = "Rubble"
Pos = -180+random%360,-180+random%360
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1001]
Type=Destroyself
Trigger1= animtime = 0

;---------------------------------------------------------------------------
;Outward Ice
[Statedef 6982]
type    = S                      
movetype= I                     
physics = N                                          
ctrl = 0                         
anim = 9030+random%2                 
poweradd = 0       
sprpriority = 5          

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*3,256

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, SprPriority]
type = SprPriority
trigger1 = !time
value = -4+random%10
;ignorehitpause = 
;persistent = 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0) + time
scale = 0.75+(var(0)/1000),0.75+(var(0)/1000)

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = floor(sin(random%360)*4)
y = floor(cos(random%360)*4)

[State 0, VelSet]
type = Veladd
trigger1 = time > 1
y = .4

[State 0, Gravity]
type = null;Gravity
trigger1 = time > 12
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
type = null;Velmul
trigger1 = time = 13
x = 0.999
y = 0.85

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1001]
Type=Destroyself
Trigger1= animtime = 0

;---------------------------------------------------------------------------
;Inward Ice
[Statedef 6983]
type    = S                      
movetype= I                     
physics = N                                          
ctrl = 0                         
anim = 9030+random%2                   
poweradd = 0       
sprpriority = 5          

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*3,256

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, SprPriority]
type = SprPriority
trigger1 = !time
value = -4+random%10
;ignorehitpause = 
;persistent = 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = 0.75+(var(0)/1000),0.75+(var(0)/1000)

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = floor((Parentdist X)/13)
y = floor((Parentdist Y)/13)

[State 0, Gravity]
type = null;Gravity
trigger1 = time > 12
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
type = null;Velmul
trigger1 = time = 13
x = 0.999
y = 0.85

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1001]
Type=Destroyself
Trigger1= animtime = 0

;======================================================================================================================================================
;The Helper of Zio
[Statedef 7770]
type = S
physics = N
movetype = A
anim = 9999
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = time >= 1
persistent = 1

;======================================================================================================================================================
;The Helper of Auto Combos
[Statedef 7776]
type = S
physics = N
movetype = A
anim = 9999
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = root,time <= 0
trigger2 = time >= 20
persistent = 1

;======================================================================================================================================================
;The Helper of Permission
[Statedef 7777]
type = S
physics = N
movetype = A
anim = 9999
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = root,stateno = [6060,6061]
trigger2 = root,movetype != A
trigger3 = numhelper(7777) > 1
trigger3 = time >= 5
trigger4 = root,stateno = [1000,3999]
trigger4 = root,time < 2
persistent = 1

;======================================================================================================================================================
;The Helper of Self Damage
[Statedef 7778]
type = S
physics = N
movetype = A
anim = 9999
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1350, End]
type = destroyself
trigger1 = time >= 10
persistent = 1

;======================================================================================================================================================
;Astral Heat Background
[Statedef 7005]
type = S
physics = N
movetype = A
anim = 9999
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 7018
ID = 7005
pos = 0,0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
supermovetime=99
pausemovetime=99
scale = 1,1
sprpriority = -5
ontop = 0
shadow = 0,0,0
ownpal = 1
removetime = -1

[State 3000, 7]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = noBG
flag3 = timerfreeze
ignorehitpause = 1

[State 3000, 7]
type = assertspecial
trigger1 = 1
flag = globalnoshadow
ignorehitpause = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1000]
type = Explod
trigger1 = time
persistent = 16
anim = 7017
ID = 7005
pos = -300,-280
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 16,0
accel = 0,0
random = 0,0
removetime = 36
scale = 0.5,0.5
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal= 0
removeongethit = 1
supermovetime = 9999
pausemovetime = 9999 

[State 1000]
type = Explod
trigger1 = time
persistent = 16
anim = 7017
ID = 7005
pos = -300,-140
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 16,0
accel = 0,0
random = 0,0
removetime = 36
scale = 0.5,0.5
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal= 0
removeongethit = 1
supermovetime = 9999
pausemovetime = 9999 

[State 1000]
type = Explod
trigger1 = time
persistent = 16
anim = 7017
ID = 7005
pos = -300,50
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 16,0
accel = 0,0
random = 0,0
removetime = 36
scale = 0.5,0.5
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal= 0
removeongethit = 1
supermovetime = 9999
pausemovetime = 9999 

[State 1350, End]
type = removeexplod
trigger1 = root,stateno != [3900,3901]
ID = 7005

[State 1350, End]
type = destroyself
trigger1 = root,stateno != [3900,3903]

;======================================================================================================================================================
;Ultraburst Manager
[Statedef 9879]
type = S
physics = N
movetype = I
anim = 9999
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State -2]
type = Explod
triggerall = TeamSide = 1
trigger1 = NumExplod(9879) = 0
anim = 9879
ID = 9879
scale = root,fvar(19)*.00018,.5
postype = left
pos = 8,64
sprpriority = -6
bindtime = -1
pausemovetime = -1
supermovetime = -1
ignorehitpause = 1
ownpal = 1

[State -2]
type = Explod
triggerall = TeamSide = 2
trigger1 = NumExplod(9879) = 0
anim = 9879
ID = 9879
scale = root,fvar(19)*.00018,.5
postype = right
pos = -60,64
sprpriority = -6
bindtime = -1
pausemovetime = -1
supermovetime = -1
ignorehitpause = 1
ownpal = 1

[State -2]
type = modifyExplod
trigger1 = root,fvar(19) > 0
anim = 9879
ID = 9879
scale = root,fvar(19)*.00018,.5
pausemovetime = -1
supermovetime = -1
ignorehitpause = 1
ownpal = 1
persistent = 1

[State -2]
type = RemoveExplod
trigger1 = root,fvar(19) <= 0
ID = 9879
ignorehitpause = 1

[State 1300]
type = helper
trigger1 = !numhelper(8988)
helpertype = normal
stateno = 8988
ID = 8988
name = "Effect"
postype = p1
pos = 0, 0
ownpal = 1
supermovetime=99999
pausemovetime=99999

[State -2]
type = assertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[State -2]
type = poweradd
triggerall = root,stateno != [3000,4999]
trigger1 = root,movetype != H
value = 3
ignorehitpause = 1

[State 3007,]
type = Helper
trigger1 = winko
trigger1 = !numhelper(8992)
helpertype = Normal
name = "Finish"
stateno = 8992
ID = 8992
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1
persistent = 0

[State 1350, End]
type = removeexplod
trigger1 = root,fvar(19) <= 0
ID = 7003
persistent = 1

[State 8000, ]
type = playsnd
trigger1 = root,fvar(19) <= 0
value = 8005,1
ignorehitpause = 1
persistent = 0

[State 1350, End]
type = destroyself
trigger1 = root,fvar(19) <= 0
persistent = 1

;======================================================================================================================================================
;Aura
[Statedef 9883]
type = A
movetype = I
physics = N
Anim = 9999
sprpriority = 10

[State NotH, 1]
type = NotHitBy
Trigger1 = Time >= 0
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State Assert, 1]
type = assertspecial
Trigger1 = 1 
flag = noshadow
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State BindToR, 1]
type = Bindtoroot
Trigger1 = 1
Time = -1
facing = 1
pos = 0,0
ignorehitpause = 1

[State ChangeA, 1]
type = changeanim
trigger1 = root,numexplod(5999) = 0
value = 9999
ignorehitpause = 1

[State ChangeA, 1]
type = ChangeAnim
trigger1 = root,numexplod(5999)
trigger1 = time >= 0
value = root,anim
elem  = root,animelemno(-1)
persistent = 1
ignorehitpause = 1
ignorehitpause = 1

[State Pal, 1]
type = PalFX
trigger1 = 1
time = 1
add = 85,0,0
mul = var(18),0,0
ignorehitpause = 1

[State VarS, 1]
type = Varset
trigger1 = time = 0
ignorehitpause = 1
var(17) = 180
ignorehitpause = 1

[State VarA, 1]
type = Varadd
trigger1 = time >= 0
ignorehitpause = 1
var(17) = -8
ignorehitpause = 1

[State Trans, 1]
type = Trans
trigger1 = time >= 0
trans = addalpha
alpha = var(17),256
ignorehitpause = 1

[State VarS, 1]
type = Varset
trigger1 = time = 0
ignorehitpause = 1
var(18) = 256
ignorehitpause = 1

[State VarA, 1]
type = Varadd
trigger1 = time >= 0
ignorehitpause = 1
var(18) = 1
ignorehitpause = 1

[State AngleD, 1]
type = AngleDraw
trigger1 = 1
scale = .33,fvar(1)
ignorehitpause = 1

[State VarS, 1]
type = Varset
Trigger1 = time = 0
ignorehitpause = 1
fvar(1) = 0.33
ignorehitpause = 1

[State VarS, 1]
type = Varadd
Trigger1 = time >= 0
ignorehitpause = 1
fvar(1) = .0025
ignorehitpause = 1

[State Destroy, 1]
type = Destroyself
Trigger1 = time >= 16

;======================================================================================================================================================
;Not Over Yet Manager
[Statedef 9884]
type = S
physics = N
movetype = I
anim = 9999
ctrl = 0
velset = 0, 0
sprpriority = 4

[State 0,]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 1350, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1, 3]
type = playsnd
trigger1 = time = 0
trigger2 = root,time = [0,1]
Trigger2 = root,stateno = 3000
trigger3 = root,time = [0,1]
Trigger3 = root,stateno = 3050
value = 3000, 3

[State 1, 3]
type = poweradd
trigger1 = !time
value = 500

[State 1, 3]
type = poweradd
triggerall = root,stateno != [3000,3999]
trigger1 = time%10 = 0
value = 1

[State -2, Explod]
type = Explod
trigger1 = teamside = 1
trigger1 = !time
anim = 9884
pos = 5,75
postype = left
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod]
type = Explod
trigger1 = teamside = 2
trigger1 = !time
anim = 9884
pos = -95,75
postype = right
removetime = -2
supermove = 1
scale = 0.25,0.25
sprpriority = 0
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2]
type = Helper
Trigger1 = !time
helpertype = normal
ID = 9883
Stateno = 9883
pos = 0,0
PosType = p1
persisent = 0
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999

[State -2]
type = Helper
trigger1 = root,time = [0,1]
Trigger1 = root,stateno = 3000
helpertype = normal
ID = 9883
Stateno = 9883
pos = 0,0
PosType = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999

[State -2]
type = Helper
trigger1 = root,time = [0,1]
Trigger1 = root,stateno = [3050,3055]
helpertype = normal
ID = 9883
Stateno = 9883
pos = 0,0
PosType = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999

[State 1350, End]
type = null;destroyself
trigger1 = root,fvar(19) <= 0
persistent = 1

;---------------------------------------------------------------------------
;Super Finish
[Statedef 8992]
physics  = N
ctrl     = 0
Anim = 9999

[State 3020,]
type = pause
trigger1 = !time
time = 50
ignorehitpause = 1

[State 3020,]
type = playsnd
trigger1 = !time
value = 7005,0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 7011
ID =7002
pos = 0,0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
supermovetime=99
pausemovetime=99
scale = 1,1
sprpriority = -3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 3020,]
type = Explod
trigger1 = time = 0
anim = 7004
ID = 7002
facing = 1
postype = back
pos = 160,120
sprpriority = -4
ownpal = 1
scale =1,1
pausemovetime = 99999
supermovetime = 99999
supermove = 1
bindtime = -1
removetime = -1
shadow = 0,0,0
persistent = 0
ignorehitpause = 1

[State 3020,]
type = Explod
trigger1 = time = 0
anim = 7005
ID = 7002
facing = 1
postype = back
pos = 160,120
sprpriority = -5
ownpal = 1
scale = 1,1
pausemovetime = 99999
supermovetime = 99999
supermove = 1
bindtime = -1
removetime = -1
shadow = 0,0,0
persistent = 0
ignorehitpause = 1

[State 3020,]
type = Explod
trigger1 = time = 0
anim = 7006
ID = 7006
facing = 1
postype = back
pos = 160,120
sprpriority = -7
ownpal = 1
scale =.7,.7
pausemovetime = 99999
supermovetime = 99999
supermove = 1
bindtime = -1
removetime = -1
shadow = 0,0,0
persistent = 0
ignorehitpause = 1

[State ]
type=modifyexplod
trigger1=numexplod(7002)
trigger1 = time < 20
ID=7006
;trans=addalpha
scale = .7+time*.1,.7+time*.1
;alpha=256-((time-20)*5),256

[State ]
type=modifyexplod
trigger1=numexplod(7002)
trigger1 = time >= 20
ID=7006
trans=addalpha
scale = .7+time*.1,.7+time*.1
alpha=256-((time-20)*5),256

[State ]
type=modifyexplod
trigger1=numexplod(7002)
trigger1 = time >= 20
ID=7002
trans=addalpha
alpha=256-((time-20)*5),256

[State 3020,]
type = removeexplod
trigger1 = time >= 100
ID = 7002
ignorehitpause = 1

[State 3020,]
type = DestroySelf
trigger1 = time >= 100
ignorehitpause = 1

;---------------------------------------------------------------------------
;Distortion BG
[Statedef 8985]
physics  = N
ctrl     = 0
Anim = 7100

[State AssertS, 1]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State AssertS, 1]
type = AssertSpecial
trigger1 = time >= 16
flag = nobg
flag2 = nofg

[State BGPalF, 1]
type = BGPalFX
trigger1 = time < 16
mul = 256-(time)*5,256-(time)*5,256-(time)*5
time = 1
ignorehitpause = 1

[State 1200, 6]
type = explod
trigger1 = !time
anim = 7002
id = 7002
postype = p1
pos = 0, 0
facing = 1
sprpriority = 50
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
pausemovetime = 9999
supermovetime = 9999

[State 1200, 6]
type = explod
trigger1 = !time
anim = 7003
id = 7003
postype = p1
pos = 0, 0
facing = 1
sprpriority = 50
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = 0.1,0.1
pausemovetime = 9999
supermovetime = 9999

[State 1200, 6]
type = explod
trigger1 = !time
anim = 7100
id = 7100
postype = left
pos = -10, 120
facing = 1
sprpriority = -2000
bindtime = -1
ownpal = 0
ignorehitpause = 1
persistent = 0
scale=150,.1
pausemovetime = 9999
supermovetime = 9999

[State 1200, 6]
type = explod
trigger1 = !time
anim = 7200
id = 7200
postype = left
pos = 160,120
facing = 1
sprpriority = -1950
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale =.5,.5
pausemovetime = 9999
supermovetime = 9999

[State ]
type=modifyexplod
trigger1=numexplod(7003)
trigger1 = time 
ID=7003
trans=addalpha
alpha = 256,256
scale = 0.1+(time*.03),0.1+(time*.03)

[State 3007,]
type = Helper
trigger1 = time%15 = 0
helpertype = Normal
name = "Effect"
stateno = 7000
ID = 7000
pos = 0,-80
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1
persistent = 1

[State Pal, 1]
type = remappal
trigger1 = !ishelper(7003)
trigger1 = !numhelper(9884)
source = 7,0
dest = 7,0
ignorehitpause = 1
persistent = 0

[State Pal, 1]
type = remappal
trigger1 = !ishelper(7003)
trigger1 = numhelper(9884)
source = 7,0
dest = 8,0
ignorehitpause = 1
persistent = 0

[State Pal, 1]
type = remappal
trigger1 = ishelper(7003)
source = 7,0
dest = 9,0
ignorehitpause = 1
persistent = 0

[State 3020,]
type = changestate
trigger1 = ishelper(7001)
trigger1 = time >= 50
trigger2 = ishelper(7002)
trigger2 = time >= 55
trigger3 = ishelper(7003)
trigger3 = time >= 70
value = 8986
ignorehitpause = 1

[State 3020,]
type = removeexplod
trigger1 = root,stateno = [3901,3999]
ID = 7100
ignorehitpause = 1

[State 3020,]
type = removeexplod
trigger1 = root,stateno = [3901,3999]
ID = 7200
ignorehitpause = 1

[State 3020,]
type = destroyself
trigger1 = root,stateno = [3901,3999]
ignorehitpause = 1

;---------------------------------------------------------------------------
;Distortion Effect
[Statedef 7000]
physics  = N
ctrl     = 0
Anim = 7000

[State AssertS, 1]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State ] 
type=Explod
trigger1=time=0
anim=7000
ID=7000
postype=left
pos=0,95
vel = -1,0
sprpriority=-1199
bindtime=-1
removetime = -1
supermovetime=9999
pausemovetime=9999

[State ] 
type=Explod
trigger1=time=0
anim=7000
ID=7000
postype=left
vfacing = -1
pos=0,145
vel = -1,0
sprpriority=-1199
bindtime=-1
removetime = -1
supermovetime=9999
pausemovetime=9999

[State ]
type=varadd
trigger1=numexplod(7000)
var(0)=7

[State ]
type=varset
trigger1=var(0)>256
var(0)=256

[State ]
type=varadd
trigger1=numexplod(7000)
fvar(0)=.022

[State ]
type=modifyexplod
trigger1=numexplod(7000)
ID=7000
trans=addalpha
alpha=256-var(0),256
scale=.5,1-fvar(0)

[State ]
type=RemoveExplod
trigger1=var(0)>=256&&numexplod(7000)
trigger2 = root,stateno = [3901,3999]
ID=7000

[State 3020,]
type = destroyself
trigger1 = !numexplod(7000)
trigger1 = time >= 15
trigger2 = root,stateno = [3901,3999]
ignorehitpause = 1

[State Pal, 1]
type = remappal
trigger1 = parent,ishelper(7003) = 0
trigger1 = !numhelper(9884)
source = 4,0
dest = 4,0
ignorehitpause = 1
persistent = 0

[State Pal, 1]
type = remappal
trigger1 = parent,ishelper(7003) = 0
trigger1 = numhelper(9884)
source = 4,0
dest = 5,0
ignorehitpause = 1
persistent = 0

[State Pal, 1]
type = remappal
trigger1 = parent,ishelper(7003)
source = 4,0
dest = 6,0
ignorehitpause = 1
persistent = 0

;-------------------------------------------------------------------------------
;Distortion BG End
[Statedef 8986]
type = A
physics = N
anim = 9999

[State AssertS, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State AssertS, 1]
type = AssertSpecial
trigger1 = time <= 16
flag = noBG

[State BGPalF, 1]
type = BGPalFX
trigger1 = numhelper(8988)
trigger2 = enemynear,numhelper(8988)
triggerall = time >= 16
mul = (time-15)*10,(time-15)*10,(time-15)*10
time = 1
ignorehitpause = 1

[State BGPalF, 1]
type = BGPalFX
trigger1 = !numhelper(8988)
trigger1 = time >= 16
mul = (time-15)*16,(time-15)*16,(time-15)*16
time = 1
ignorehitpause = 1

[State ]
type=modifyexplod
trigger1=numexplod(7100)
trigger1 = time 
ID=7100
trans=addalpha
alpha = 256-(time*10),256

[State RemoveE, 1]
type = RemoveExplod
triggerall = numexplod(7100)
trigger1 = time >= 25
ID = 7100

[State DestroyS, 1]
type = DestroySelf
trigger1 = !numhelper(7000)
trigger1 = time >= 26

[State 3020,]
type = removeexplod
trigger1 = root,stateno = [3901,3999]
ID = 7100
ignorehitpause = 1

[State 3020,]
type = removeexplod
trigger1 = root,stateno = [3901,3999]
ID = 7200
ignorehitpause = 1

[State 3020,]
type = destroyself
trigger1 = root,stateno = [3901,3999]
ignorehitpause = 1

;---------------------------------------------------------------------------
;Ultra FG
[Statedef 8988]
physics  = N
ctrl     = 0
Anim = 9999

[State 0, Explod]
type = Explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7001
ID =7001
pos = 160,120
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
random = 0,0
supermovetime=9999
pausemovetime=9999
scale = .65,.65
sprpriority = -150
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7001
ID =7001
pos = 160,120
postype = left
facing = -1
vfacing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
random = 0,0
supermovetime=9999
pausemovetime=9999
scale = .65,.65
sprpriority = -150
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State ]
type=modifyexplod
trigger1=numexplod(7001)
trigger1 = time < 30
ID=7001
trans=addalpha
alpha=0+(time*15),256

[State 7005, ]
type = bgpalfx
trigger1 = time < 10
;trigger2 = roundstate = 3
time = 1
color = 256
mul = 256-time*10,256-time*10,256-time*10
ignorehitpause = 1
persistent = 1

[State 7005, ]
type = bgpalfx
trigger1 = time >= 10
;trigger2 = roundstate = 3
time = 1
color = 256
mul = 156,156,156
ignorehitpause = 1
persistent = 1

[State 3020,]
type = removeexplod
trigger1 = winko
ID = 7001
ignorehitpause = 1

[State 3020,]
type = destroyself
trigger1 = winko
ignorehitpause = 1

[State 3020,]
type = changestate
trigger1 = root,fvar(19) <= 0
value = 8989
ignorehitpause = 1

;---------------------------------------------------------------------------
;Ultra FG Fade
[Statedef 8989]
physics  = N
ctrl     = 0
Anim = 9999

[State ]
type=modifyexplod
trigger1=numexplod(7001)
trigger1 = time
ID=7001
trans=addalpha
alpha=256-(time*15),256

[State 7005, ]
type = bgpalfx
trigger1 = time < 10
;trigger2 = roundstate = 3
time = 1
color = 256
mul = 156+time*10,156+time*10,156+time*10
ignorehitpause = 1
persistent = 1


[State 3020,]
type = removeexplod
trigger1 = time >= 30
trigger2 = winko
ID = 7001
ignorehitpause = 1

[State 3020,]
type = destroyself
trigger1 = time >= 30
trigger2 = winko
ignorehitpause = 1


;======================================================================================================================================================
;Ink's Projectile Detection

[Statedef 33333333]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
 
;==========================================================================
;                Config Section
;==========================================================================
anim = 9999                  ; blank animation
 
;==========================================================================
 
[state 33333333, Clipboard] 
type = DisplayToClipboard
trigger1 = 1
text = "Highest Playerid = %d , Projectile helper's PlayerId = %d\nBy Inktrebuchet"
params = var(0)-1, var(3)
;==========================================================================
;                Detect Enemy's Projectile Helper
;==========================================================================
[State 33333333, 0]
type = Null
trigger1 = var(0) = 0
trigger1 = (var(0) := id)
ignorehitpause = 1
 
[state 33333333, 1] 
type = varadd
trigger1 = PlayerIdExist(var(0)) 
trigger2 = PlayerIdExist(var(0)+1) 
trigger3 = PlayerIdExist(var(0)+2) 
trigger4 = PlayerIdExist(var(0)+3) 
trigger5 = PlayerIdExist(var(0)+4) 
trigger6 = PlayerIdExist(var(0)+5) 
trigger7 = PlayerIdExist(var(0)+6) 
trigger8 = PlayerIdExist(var(0)+7) 
trigger9 = PlayerIdExist(var(0)+8) 
trigger10 = PlayerIdExist(var(0)+9) 
trigger11 = PlayerIdExist(var(0)+10) 
trigger12 = PlayerIdExist(var(0)+11) 
trigger13 = PlayerIdExist(var(0)+12) 
trigger14 = PlayerIdExist(var(0)+13) 
trigger15 = PlayerIdExist(var(0)+14) 
trigger16 = PlayerIdExist(var(0)+15) 
trigger17 = PlayerIdExist(var(0)+16) 
trigger18 = PlayerIdExist(var(0)+17) 
trigger19 = PlayerIdExist(var(0)+18) 
trigger20 = PlayerIdExist(var(0)+19) 
trigger21 = PlayerIdExist(var(0)+20) 
trigger22 = PlayerIdExist(var(0)+21) 
trigger23 = PlayerIdExist(var(0)+22) 
trigger24 = PlayerIdExist(var(0)+23) 
trigger25 = PlayerIdExist(var(0)+24) 
trigger26 = PlayerIdExist(var(0)+25) 
v = 0
value = 1
ignorehitpause = 1
 
[State 33333333, 2]
type = Null
triggerall = PlayerIdExist(Root,ID)
trigger1 = PlayerIdExist(var(0)-1)
trigger1 = cond(root,teamside = 1, PlayerID(var(0)-1),teamside = 2, PlayerID(var(0)-1),teamside = 1)
trigger1 = PlayerID(var(0)-1),hitdefattr = ASC, NP, SP, HP
trigger1 = var(3) := (var(0)-1)
trigger2 = PlayerIdExist(var(0)-2)
trigger2 = cond(root,teamside = 1, PlayerID(var(0)-2),teamside = 2, PlayerID(var(0)-2),teamside = 1)
trigger2 = PlayerID(var(0)-2),hitdefattr = ASC, NP, SP, HP
trigger2 = var(3) := (var(0)-2)
trigger3 = PlayerIdExist(var(0)-3)
trigger3 = cond(root,teamside = 1, PlayerID(var(0)-3),teamside = 2, PlayerID(var(0)-3),teamside = 1)
trigger3 = PlayerID(var(0)-3),hitdefattr = ASC, NP, SP, HP
trigger3 = var(3) := (var(0)-3)
trigger4 = PlayerIdExist(var(0)-4)
trigger4 = cond(root,teamside = 1, PlayerID(var(0)-4),teamside = 2, PlayerID(var(0)-4),teamside = 1)
trigger4 = PlayerID(var(0)-4),hitdefattr = ASC, NP, SP, HP
trigger4 = var(3) := (var(0)-4)
trigger5 = PlayerIdExist(var(0)-5)
trigger5 = cond(root,teamside = 1, PlayerID(var(0)-5),teamside = 2, PlayerID(var(0)-5),teamside = 1)
trigger5 = PlayerID(var(0)-5),hitdefattr = ASC, NP, SP, HP
trigger5 = var(3) := (var(0)-5)
trigger6 = PlayerIdExist(var(0)-6)
trigger6 = cond(root,teamside = 1, PlayerID(var(0)-6),teamside = 2, PlayerID(var(0)-6),teamside = 1)
trigger6 = PlayerID(var(0)-6),hitdefattr = ASC, NP, SP, HP
trigger6 = var(3) := (var(0)-6)
trigger7 = PlayerIdExist(var(0)-7)
trigger7 = cond(root,teamside = 1, PlayerID(var(0)-7),teamside = 2, PlayerID(var(0)-7),teamside = 1)
trigger7 = PlayerID(var(0)-7),hitdefattr = ASC, NP, SP, HP
trigger7 = var(3) := (var(0)-7)
trigger8 = PlayerIdExist(var(0)-8)
trigger8 = cond(root,teamside = 1, PlayerID(var(0)-8),teamside = 2, PlayerID(var(0)-8),teamside = 1)
trigger8 = PlayerID(var(0)-8),hitdefattr = ASC, NP, SP, HP
trigger8 = var(3) := (var(0)-8)
trigger9 = PlayerIdExist(var(0)-9)
trigger9 = cond(root,teamside = 1, PlayerID(var(0)-9),teamside = 2, PlayerID(var(0)-9),teamside = 1)
trigger9 = PlayerID(var(0)-9),hitdefattr = ASC, NP, SP, HP
trigger9 = var(3) := (var(0)-9)
trigger10 = PlayerIdExist(var(0)-10)
trigger10 = cond(root,teamside = 1, PlayerID(var(0)-10),teamside = 2, PlayerID(var(0)-10),teamside = 1)
trigger10 = PlayerID(var(0)-10),hitdefattr = ASC, NP, SP, HP
trigger10 = var(3) := (var(0)-10)
ignorehitpause = 1
 
[State 33333333, BindToRoot]
type = BindToRoot
trigger1 = PlayerIdExist(Root,ID)
time = 1
facing = 1
pos =0,-2
ignorehitpause = 1 